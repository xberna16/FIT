--------------------------------------------------------
--  File created - ètvrtek-bøezna-29-2018   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence DEVICE_PERSON_ADMIN_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_PERSON_ADMIN_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICE_PERSON_ADMIN_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_PERSON_ADMIN_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICE_PERSON_USED_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_PERSON_USED_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICE_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICE_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICE_SEQ2
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICE_SEQ2"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICETYPE_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICETYPE_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence DEVICETYPE_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."DEVICETYPE_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence PERSON_DEPARTMENT_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."PERSON_DEPARTMENT_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence REPAIR_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."REPAIR_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence REPAIR_SEQ1
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."REPAIR_SEQ1"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Sequence TABLE1_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "XBERNA16"."TABLE1_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE  GLOBAL ;
--------------------------------------------------------
--  DDL for Table DEPARTMENT
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."DEPARTMENT" 
   (	"NAME" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DEVICE
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."DEVICE" 
   (	"ID" NUMBER(*,0), 
	"BUYDATE" DATE, 
	"SERIALNUMBER" VARCHAR2(30 BYTE), 
	"MANUFACTURER" VARCHAR2(64 BYTE), 
	"TYPE" NUMBER(*,0), 
	"ROOM" VARCHAR2(20 BYTE), 
	"DEPARTMENT" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DEVICE_PERSON_ADMIN
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" 
   (	"ID" NUMBER(*,0), 
	"DEVICE" NUMBER(*,0), 
	"PERSON" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DEVICE_PERSON_USED
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."DEVICE_PERSON_USED" 
   (	"ID" NUMBER(*,0), 
	"DEVICE" NUMBER(*,0), 
	"PERSON" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DEVICETYPE
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."DEVICETYPE" 
   (	"ID" NUMBER(*,0), 
	"NAME" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table MANUFACTURER
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."MANUFACTURER" 
   (	"NAME" VARCHAR2(64 BYTE), 
	"ADDRESS" VARCHAR2(128 BYTE), 
	"CONTACT" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PERSON
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."PERSON" 
   (	"PID" VARCHAR2(20 BYTE), 
	"NAME" VARCHAR2(20 BYTE), 
	"SURNAME" VARCHAR2(20 BYTE), 
	"MAIL" VARCHAR2(32 BYTE), 
	"ADMIN" NUMBER(1,0), 
	"ROOM" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PERSON_DEPARTMENT
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."PERSON_DEPARTMENT" 
   (	"ID" VARCHAR2(20 BYTE), 
	"PERSON" VARCHAR2(20 BYTE), 
	"DEPARTMENT" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REPAIR
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."REPAIR" 
   (	"ID" VARCHAR2(20 BYTE), 
	"REPORTED" DATE, 
	"FINISHED" DATE, 
	"DEVICE" NUMBER(*,0), 
	"ADMINISTRATED_BY" VARCHAR2(20 BYTE), 
	"REPORTED_BY" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ROOM
--------------------------------------------------------

  CREATE TABLE "XBERNA16"."ROOM" 
   (	"NAME" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into XBERNA16.DEPARTMENT
SET DEFINE OFF;
Insert into XBERNA16.DEPARTMENT (NAME) values ('CVT');
Insert into XBERNA16.DEPARTMENT (NAME) values ('Deanship');
Insert into XBERNA16.DEPARTMENT (NAME) values ('Library');
REM INSERTING into XBERNA16.DEVICE
SET DEFINE OFF;
Insert into XBERNA16.DEVICE (ID,BUYDATE,SERIALNUMBER,MANUFACTURER,TYPE,ROOM,DEPARTMENT) values ('0',to_date('01.01.18','DD.MM.RR'),'xx123','Dell','3','D105','Deanship');
Insert into XBERNA16.DEVICE (ID,BUYDATE,SERIALNUMBER,MANUFACTURER,TYPE,ROOM,DEPARTMENT) values ('1',to_date('01.01.18','DD.MM.RR'),'xx122','Dell','3','Library','Library');
Insert into XBERNA16.DEVICE (ID,BUYDATE,SERIALNUMBER,MANUFACTURER,TYPE,ROOM,DEPARTMENT) values ('2',to_date('01.01.18','DD.MM.RR'),'xx124','Dell','3','Library','Library');
Insert into XBERNA16.DEVICE (ID,BUYDATE,SERIALNUMBER,MANUFACTURER,TYPE,ROOM,DEPARTMENT) values ('3',to_date('01.01.18','DD.MM.RR'),'aa123','Dell','2','Library','Library');
Insert into XBERNA16.DEVICE (ID,BUYDATE,SERIALNUMBER,MANUFACTURER,TYPE,ROOM,DEPARTMENT) values ('4',to_date('01.01.18','DD.MM.RR'),'aa124','Dell','2','Library','Library');
REM INSERTING into XBERNA16.DEVICE_PERSON_ADMIN
SET DEFINE OFF;
Insert into XBERNA16.DEVICE_PERSON_ADMIN (ID,DEVICE,PERSON) values ('1','0','970101/1211');
Insert into XBERNA16.DEVICE_PERSON_ADMIN (ID,DEVICE,PERSON) values ('2','1','970101/1211');
REM INSERTING into XBERNA16.DEVICE_PERSON_USED
SET DEFINE OFF;
Insert into XBERNA16.DEVICE_PERSON_USED (ID,DEVICE,PERSON) values ('1','0','970101/1111');
Insert into XBERNA16.DEVICE_PERSON_USED (ID,DEVICE,PERSON) values ('2','1','970101/1111');
REM INSERTING into XBERNA16.DEVICETYPE
SET DEFINE OFF;
Insert into XBERNA16.DEVICETYPE (ID,NAME) values ('1','Notebook');
Insert into XBERNA16.DEVICETYPE (ID,NAME) values ('2','Monitor');
Insert into XBERNA16.DEVICETYPE (ID,NAME) values ('3','PC');
REM INSERTING into XBERNA16.MANUFACTURER
SET DEFINE OFF;
Insert into XBERNA16.MANUFACTURER (NAME,ADDRESS,CONTACT) values ('Hewlett Packard','Praha
','123456789');
Insert into XBERNA16.MANUFACTURER (NAME,ADDRESS,CONTACT) values ('Dell','Brno','987654321');
REM INSERTING into XBERNA16.PERSON
SET DEFINE OFF;
Insert into XBERNA16.PERSON (PID,NAME,SURNAME,MAIL,ADMIN,ROOM) values ('970101/1111','Jan','Novak','jan.novak@vut.cz','0','A203');
Insert into XBERNA16.PERSON (PID,NAME,SURNAME,MAIL,ADMIN,ROOM) values ('970101/1211','Jan','Obrtanec','jan.obrtanec@vut.cz','1','D105');
Insert into XBERNA16.PERSON (PID,NAME,SURNAME,MAIL,ADMIN,ROOM) values ('970201/1111','Frantisek','Databáz','fra.databaz@vut.cz','1','D105');
Insert into XBERNA16.PERSON (PID,NAME,SURNAME,MAIL,ADMIN,ROOM) values ('970301/1111','Petr','Tumpeta','pet.trumpeta@vut.cz','0','A203');
REM INSERTING into XBERNA16.PERSON_DEPARTMENT
SET DEFINE OFF;
Insert into XBERNA16.PERSON_DEPARTMENT (ID,PERSON,DEPARTMENT) values ('2','970101/1111','Library');
Insert into XBERNA16.PERSON_DEPARTMENT (ID,PERSON,DEPARTMENT) values ('3','970101/1211','Deanship');
REM INSERTING into XBERNA16.REPAIR
SET DEFINE OFF;
Insert into XBERNA16.REPAIR (ID,REPORTED,FINISHED,DEVICE,ADMINISTRATED_BY,REPORTED_BY) values ('0',to_date('01.02.18','DD.MM.RR'),to_date('02.02.18','DD.MM.RR'),'0','970101/1211','970101/1111');
Insert into XBERNA16.REPAIR (ID,REPORTED,FINISHED,DEVICE,ADMINISTRATED_BY,REPORTED_BY) values ('1',to_date('01.02.18','DD.MM.RR'),to_date('02.02.18','DD.MM.RR'),'1','970101/1211','970101/1111');
REM INSERTING into XBERNA16.ROOM
SET DEFINE OFF;
Insert into XBERNA16.ROOM (NAME) values ('A203');
Insert into XBERNA16.ROOM (NAME) values ('D105');
Insert into XBERNA16.ROOM (NAME) values ('Library');
--------------------------------------------------------
--  DDL for Index DEPARTMENT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."DEPARTMENT_PK" ON "XBERNA16"."DEPARTMENT" ("NAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index DEVICE_PERSON_ADMIN_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."DEVICE_PERSON_ADMIN_PK" ON "XBERNA16"."DEVICE_PERSON_ADMIN" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index DEVICE_PERSON_USED_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."DEVICE_PERSON_USED_PK" ON "XBERNA16"."DEVICE_PERSON_USED" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index DEVICE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."DEVICE_PK" ON "XBERNA16"."DEVICE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index DEVICETYPE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."DEVICETYPE_PK" ON "XBERNA16"."DEVICETYPE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index MANUFACTURER_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."MANUFACTURER_PK" ON "XBERNA16"."MANUFACTURER" ("NAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PERSON_DEPARTMENT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."PERSON_DEPARTMENT_PK" ON "XBERNA16"."PERSON_DEPARTMENT" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PERSON_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."PERSON_PK" ON "XBERNA16"."PERSON" ("PID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index REPAIR_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."REPAIR_PK" ON "XBERNA16"."REPAIR" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index ROOM_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "XBERNA16"."ROOM_PK" ON "XBERNA16"."ROOM" ("NAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger DEVICE_PERSON_ADMIN_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICE_PERSON_ADMIN_TRG" 
BEFORE INSERT ON DEVICE_PERSON_ADMIN 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT DEVICE_PERSON_ADMIN_SEQ1.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICE_PERSON_ADMIN_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICE_PERSON_USED_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICE_PERSON_USED_TRG" 
BEFORE INSERT ON DEVICE_PERSON_USED 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT DEVICE_PERSON_USED_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICE_PERSON_USED_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICE_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICE_TRG" 
BEFORE INSERT ON DEVICE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICE_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICE_TRG1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICE_TRG1" 
BEFORE INSERT ON DEVICE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICE_TRG1" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICE_TRG2
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICE_TRG2" 
BEFORE INSERT ON DEVICE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT DEVICE_SEQ2.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICE_TRG2" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICETYPE_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICETYPE_TRG" 
BEFORE INSERT ON DEVICETYPE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICETYPE_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DEVICETYPE_TRG1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."DEVICETYPE_TRG1" 
BEFORE INSERT ON DEVICETYPE 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT DEVICETYPE_SEQ1.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."DEVICETYPE_TRG1" ENABLE;
--------------------------------------------------------
--  DDL for Trigger PERSON_DEPARTMENT_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."PERSON_DEPARTMENT_TRG" 
BEFORE INSERT ON PERSON_DEPARTMENT 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT PERSON_DEPARTMENT_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."PERSON_DEPARTMENT_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REPAIR_TRG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."REPAIR_TRG" 
BEFORE INSERT ON REPAIR 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    NULL;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."REPAIR_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REPAIR_TRG1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "XBERNA16"."REPAIR_TRG1" 
BEFORE INSERT ON REPAIR 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT REPAIR_SEQ1.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "XBERNA16"."REPAIR_TRG1" ENABLE;
--------------------------------------------------------
--  Constraints for Table DEPARTMENT
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEPARTMENT" ADD CONSTRAINT "DEPARTMENT_PK" PRIMARY KEY ("NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."DEPARTMENT" MODIFY ("NAME" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table DEVICE
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE" ADD CONSTRAINT "DEVICE_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE" MODIFY ("DEPARTMENT" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICE" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table DEVICE_PERSON_ADMIN
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" ADD CONSTRAINT "DEVICE_PERSON_ADMIN_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" MODIFY ("DEVICE" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" MODIFY ("PERSON" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table DEVICE_PERSON_USED
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" ADD CONSTRAINT "DEVICE_PERSON_USED_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" MODIFY ("DEVICE" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" MODIFY ("PERSON" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table DEVICETYPE
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICETYPE" ADD CONSTRAINT "DEVICETYPE_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."DEVICETYPE" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."DEVICETYPE" MODIFY ("NAME" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table MANUFACTURER
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."MANUFACTURER" ADD CONSTRAINT "MANUFACTURER_PK" PRIMARY KEY ("NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."MANUFACTURER" MODIFY ("NAME" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PERSON
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."PERSON" ADD CONSTRAINT "PERSON_MAIL_CONST" CHECK (REGEXP_LIKE(MAIL,'^[0-9a-zA-Z\.]+@[0-9a-zA-Z\.]+\.[0-9a-zA-Z]+$')) ENABLE;
  ALTER TABLE "XBERNA16"."PERSON" ADD CONSTRAINT "PERSON_PID_CONST" CHECK (REGEXP_LIKE(PID,'^[0-9]{6}?/[0-9]{4}?$')) ENABLE;
  ALTER TABLE "XBERNA16"."PERSON" ADD CONSTRAINT "PERSON_PK" PRIMARY KEY ("PID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."PERSON" MODIFY ("PID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PERSON_DEPARTMENT
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" ADD CONSTRAINT "PERSON_DEPARTMENT_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" MODIFY ("PERSON" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" MODIFY ("DEPARTMENT" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table REPAIR
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."REPAIR" ADD CONSTRAINT "REPAIR_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."REPAIR" MODIFY ("ID" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."REPAIR" MODIFY ("DEVICE" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."REPAIR" MODIFY ("REPORTED" NOT NULL ENABLE);
  ALTER TABLE "XBERNA16"."REPAIR" MODIFY ("REPORTED_BY" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table ROOM
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."ROOM" ADD CONSTRAINT "ROOM_PK" PRIMARY KEY ("NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "XBERNA16"."ROOM" MODIFY ("NAME" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table DEVICE
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE" ADD CONSTRAINT "DEVICE_DEPARTMENT_FK" FOREIGN KEY ("DEPARTMENT")
	  REFERENCES "XBERNA16"."DEPARTMENT" ("NAME") ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE" ADD CONSTRAINT "DEVICE_DEVICETYPE_FK" FOREIGN KEY ("TYPE")
	  REFERENCES "XBERNA16"."DEVICETYPE" ("ID") ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE" ADD CONSTRAINT "DEVICE_MANUFACTURER_FK" FOREIGN KEY ("MANUFACTURER")
	  REFERENCES "XBERNA16"."MANUFACTURER" ("NAME") ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE" ADD CONSTRAINT "DEVICE_ROOM" FOREIGN KEY ("ROOM")
	  REFERENCES "XBERNA16"."ROOM" ("NAME") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DEVICE_PERSON_ADMIN
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" ADD CONSTRAINT "DEVICE_PERSON_ADMIN_DEVICE_FK" FOREIGN KEY ("DEVICE")
	  REFERENCES "XBERNA16"."DEVICE" ("ID") ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_ADMIN" ADD CONSTRAINT "DEVICE_PERSON_ADMIN_PERSON_FK" FOREIGN KEY ("PERSON")
	  REFERENCES "XBERNA16"."PERSON" ("PID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DEVICE_PERSON_USED
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" ADD CONSTRAINT "DEVICE_PERSON_USED_DEVICE_FK" FOREIGN KEY ("DEVICE")
	  REFERENCES "XBERNA16"."DEVICE" ("ID") ENABLE;
  ALTER TABLE "XBERNA16"."DEVICE_PERSON_USED" ADD CONSTRAINT "DEVICE_PERSON_USED_PERSON_FK" FOREIGN KEY ("PERSON")
	  REFERENCES "XBERNA16"."PERSON" ("PID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PERSON
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."PERSON" ADD CONSTRAINT "PERSON_ROOM_FK" FOREIGN KEY ("ROOM")
	  REFERENCES "XBERNA16"."ROOM" ("NAME") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PERSON_DEPARTMENT
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" ADD CONSTRAINT "PERSON_DEPARTMENT_DEPARTMENT_FK" FOREIGN KEY ("DEPARTMENT")
	  REFERENCES "XBERNA16"."DEPARTMENT" ("NAME") ENABLE;
  ALTER TABLE "XBERNA16"."PERSON_DEPARTMENT" ADD CONSTRAINT "PERSON_DEPARTMENT_PERSON_FK" FOREIGN KEY ("PERSON")
	  REFERENCES "XBERNA16"."PERSON" ("PID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table REPAIR
--------------------------------------------------------

  ALTER TABLE "XBERNA16"."REPAIR" ADD CONSTRAINT "REPAIR_DEVICE_FK" FOREIGN KEY ("DEVICE")
	  REFERENCES "XBERNA16"."DEVICE" ("ID") ENABLE;
  ALTER TABLE "XBERNA16"."REPAIR" ADD CONSTRAINT "REPAIR_PERSON_FK" FOREIGN KEY ("ADMINISTRATED_BY")
	  REFERENCES "XBERNA16"."PERSON" ("PID") ENABLE;
  ALTER TABLE "XBERNA16"."REPAIR" ADD CONSTRAINT "REPAIR_PERSON_REPORT_FK" FOREIGN KEY ("REPORTED_BY")
	  REFERENCES "XBERNA16"."PERSON" ("PID") ENABLE;
      
      
      
      
      
      --Informace o zaøízení a jeho první oprava

SELECT
    device.serialnumber,
    device.manufacturer,
    devicetype.name,
    min(repair.reported) AS min_reported
FROM
    device
    INNER JOIN repair ON device.id = repair.device
    INNER JOIN devicetype ON devicetype.id = device.type
GROUP BY
    device.serialnumber,
    device.manufacturer,
    devicetype.name,
    repair.device;
    
    
    
    
    --Opravy provádìné administrátory


SELECT
    device.serialnumber,
    device.manufacturer,
    devicetype.name AS type,
    person.name AS name1,
    person.surname,
    person.admin,
    repair.reported,
    repair.finished
FROM
    repair
    INNER JOIN device ON device.id = repair.device
    INNER JOIN devicetype ON devicetype.id = device.type
    INNER JOIN person ON repair.administrated_by = person.pid
WHERE person.name
    in (select name from person where admin = 1);
    
    
    
    
    ---Vybere vechna zaøízení která mìla alespoò jednu opravu a zobrazí poèet oprav
SELECT
    device.serialnumber,
    device.manufacturer,
    devicetype.name,
    COUNT(repair.device) AS count_device
FROM
    device
    JOIN devicetype ON devicetype.id = device.type
    left outer JOIN repair ON device.id = repair.device
where exists (select * from repair where device.id = repair.device)
GROUP BY
    device.serialnumber,
    device.manufacturer,
    devicetype.name;
    
    
    
    
    
    
    
    
